<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AdsGram Reward Demo</title>

<!-- AdsGram SDK -->
<script src="https://sad.adsgram.ai/js/sad.min.js"></script>

<script>
// BlockId'ingni shu yerga qo'yamiz
const blockId = "18030"; // <--- bu yerga sening Reward blockId
const AdController = window.Adsgram.init({ blockId });

// Foydalanuvchi ID (mini app foydalanuvchisi)
const userId = "USER_ID"; // <--- bu yerga mini app user_id

// Tugma bosilganda reklama ko'rsatish funksiyasi
function showAd() {
    AdController.show()
    .then(() => {
        console.log("Reklama tugadi / interstitial yopildi");

        // Reward URL'ga so'rov yuborish
        fetch(`https://cqjilskroiylmunpavjy.supabase.co/functions/v1/reward?userId=${userId}`, {
            method: "POST",
            headers: { "Content-Type": "application/json" }
        })
        .then(res => console.log("Reward yuborildi:", res.status))
        .catch(err => console.error("Reward xato:", err));

    })
    .catch(err => {
        console.error("Reklama xato:", err);
    });
}
</script>
</head>
<body style="display:flex; justify-content:center; align-items:center; height:100vh; background:#f0f0f0;">

<button onclick="showAd()" style="padding:20px 40px; font-size:18px; border:none; border-radius:10px; background:#4CAF50; color:white; cursor:pointer;">
  Reklamani koâ€˜rsatish
</button>

</body>
</html>
